<!DOCTYPE html>
<html>

<head>
    <title>Phishing Email Identification Quiz</title>
    <link rel="stylesheet" href="authentic_style.css">
</head>

<body>
    <h2 style="text-align: center;">Learning Quiz</h2>
    <div style="display:flex">
        <div id="email-container" style="width: 65vw; height:750px; margin-right: 20px;">
        </div>
        <div style="width:35%; height:500px;">
            <h2>Select the attributes present in the phishing email:</h2>
            <form id="quiz-form">
                <input type="checkbox" name="general-language" id="general-language" value="true"> <label
                    for="general-language">General Language</label><br>
                <input type="checkbox" name="spelling-grammatical-errors" id="spelling-grammatical-errors" value="true">
                <label for="spelling-grammatical-errors">Spelling/Grammatical Errors</label><br>
                <input type="checkbox" name="spoofed-email-sender" id="spoofed-email-sender" value="true"> <label
                    for="spoofed-email-sender">Spoofed Email Sender</label><br>
                <input type="checkbox" name="urgent-language" id="urgent-language" value="true"> <label
                    for="urgent-language">Urgent Language</label><br>
                <input type="checkbox" name="spoofed-url" id="spoofed-url" value="true"> <label
                    for="spoofed-url">Spoofed URL</label><br>
                <input type="checkbox" name="wrong-redirect" id="wrong-redirect" value="true"> <label
                    for="wrong-redirect">Wrong Redirect</label><br>
                <br>
                <button type="submit">Submit</button>
                <button onclick="nextEmail()">Next Question</button>
            </form>
            <br>
            <div id="result"></div>
        </div>
    </div>
    <script>
        function nextEmail() {
            var timeSpent = Date.now() - questionStart;
        
            if (currentEmail == 8) {
                testTimeSpent = Date.now() - testStart;
                answers.push("Quiz Complete. Total time spent: " + testTimeSpent / 1000 + " seconds");
                currentEmail = 1;
            } else {
                currentEmail++;
            }
        
            var container = document.getElementById("email-container");
            container.innerHTML = "";
            var iframe = document.createElement("iframe");
            iframe.src = "email_learn/email_" + currentEmail + ".html";
            container.appendChild(iframe);
            questionStart = Date.now();
        }

        document.getElementById("quiz-form").addEventListener("submit", function (event) {
            event.preventDefault();
            let checkboxes = document.querySelectorAll('input[type=checkbox]:checked');
            let selected = [];
            for (var i = 0; i < checkboxes.length; i++) {
                selected.push(checkboxes[i].name);
            }
            let incorrect = [];
            if (!selected.includes("general-language")) {
                incorrect.push("General Language");
            }
            if (!selected.includes("spelling-grammatical-errors")) {
                incorrect.push("Spelling/Grammatical Errors");
            }
            if (!selected.includes("spoofed-email-sender")) {
                incorrect.push("Spoofed Email Sender");
            }
            if (!selected.includes("urgent-language")) {
                incorrect.push("Urgent Language");
            }
            if (!selected.includes("spoofed-url")) {
                incorrect.push("Spoofed URL");
            }
            if (!selected.includes("wrong-redirect")) {
                incorrect.push("Wrong Redirect");
            }
            if (incorrect.length == 0) {
                document.getElementById("result").innerHTML = "Congratulations! You correctly identified all the attributes in the phishing email.";
            } else {
                document.getElementById("result").innerHTML = "The following attributes are incorrect: " + incorrect.join(", ");
            }
        });
        var currentEmail = 1;
        var container = document.getElementById("email-container");
        container.innerHTML = "";
        var iframe = document.createElement("iframe");
        iframe.src = "email_learn/email_1.html";
        container.appendChild(iframe);
        var questionStart = Date.now();
        var testStart = Date.now();

    </script>
</body>

</html>